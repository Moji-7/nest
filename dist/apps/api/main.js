(()=>{"use strict";var __webpack_modules__={292:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),student_module_1=__webpack_require__(387),reporting_module_1=__webpack_require__(139),typeorm_1=__webpack_require__(399),config_1=__webpack_require__(793),logger_1=__webpack_require__(159),serve_static_1=__webpack_require__(385),path_1=__webpack_require__(17);let AppModule=class AppModule{};AppModule=tslib_1.__decorate([(0,common_1.Module)({imports:[student_module_1.StudentModule,reporting_module_1.ReportingModule,logger_1.RihalLoggerModule,config_1.ConfigModule.forRoot(),typeorm_1.TypeOrmModule.forRoot({type:"postgres",url:"postgres://kfawlatn:dUMCryTxhvULGBSAYPA-3pazDHSbE30k@dumbo.db.elephantsql.com/kfawlatn",synchronize:!0,autoLoadEntities:!0,entities:["dist/**/*.entity{.ts,.js}"]}),serve_static_1.ServeStaticModule.forRoot({rootPath:(0,path_1.join)(__dirname,"..","admin-portal")})],controllers:[],providers:[logger_1.RihalLoggerService]})],AppModule),exports.AppModule=AppModule},139:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportingModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),typeorm_1=__webpack_require__(399),logger_1=__webpack_require__(159),classes_entity_1=__webpack_require__(404),countries_entity_1=__webpack_require__(722),student_entity_1=__webpack_require__(716),reports_controller_1=__webpack_require__(776),reports_service_1=__webpack_require__(478);let ReportingModule=class ReportingModule{};ReportingModule=tslib_1.__decorate([(0,common_1.Module)({imports:[logger_1.RihalLoggerModule,typeorm_1.TypeOrmModule.forFeature([student_entity_1.Student,classes_entity_1.Classes,countries_entity_1.Countries])],controllers:[reports_controller_1.ReportsController],providers:[reports_service_1.ReportsService,logger_1.RihalLoggerModule]})],ReportingModule),exports.ReportingModule=ReportingModule},776:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportsController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),swagger_1=__webpack_require__(519),rihal_logger_service_1=__webpack_require__(649),reports_service_1=__webpack_require__(478);let ReportsController=class ReportsController{constructor(reportsService,myLogger){this.reportsService=reportsService,this.myLogger=myLogger,this.myLogger.setContext("ReportsController")}averageStudentsAge(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.reportsService.averageStudentsAge()}))}fetchCountBy(relatedEntity,studentId){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.reportsService.fetchCountBy(relatedEntity,studentId)}))}};tslib_1.__decorate([(0,common_1.Get)("ageAverage"),(0,swagger_1.ApiOperation)({summary:"for get count of students per year of birth"}),(0,swagger_1.ApiResponse)({status:200,description:""}),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype","function"==typeof(_a="undefined"!=typeof Promise&&Promise)?_a:Object)],ReportsController.prototype,"averageStudentsAge",null),tslib_1.__decorate([(0,common_1.Get)("/:relatedEntity"),(0,swagger_1.ApiOperation)({summary:"for get count of students per each input entity(classes,countries)"}),(0,swagger_1.ApiResponse)({status:200,description:""}),tslib_1.__param(0,(0,common_1.Param)("relatedEntity")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String,Number]),tslib_1.__metadata("design:returntype","function"==typeof(_b="undefined"!=typeof Promise&&Promise)?_b:Object)],ReportsController.prototype,"fetchCountBy",null),ReportsController=tslib_1.__decorate([(0,common_1.Controller)("reports"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_c=void 0!==reports_service_1.ReportsService&&reports_service_1.ReportsService)?_c:Object,"function"==typeof(_d=void 0!==rihal_logger_service_1.RihalLoggerService&&rihal_logger_service_1.RihalLoggerService)?_d:Object])],ReportsController),exports.ReportsController=ReportsController},478:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReportsService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),typeorm_1=__webpack_require__(250),typeorm_2=__webpack_require__(399),student_entity_1=__webpack_require__(716);let ReportsService=class ReportsService{constructor(reportsService,datasource){this.reportsService=reportsService,this.datasource=datasource}fetchCountBy(relatedEntity,studentId){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const relatedColumn="classes"===relatedEntity?"classes.class_name":"countries.name";return yield this.datasource.getRepository(student_entity_1.Student).createQueryBuilder("student").select(relatedColumn,"name").innerJoin("student."+relatedEntity,relatedEntity).addSelect("count(student.id)","value").groupBy(relatedColumn).getRawMany()}))}averageStudentsAge(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.datasource.getRepository(student_entity_1.Student).createQueryBuilder("student").select("EXTRACT(YEAR FROM student.date_of_birth)","name").addSelect("count(*)","value").groupBy("EXTRACT(YEAR FROM student.date_of_birth)").getRawMany()}))}};ReportsService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__param(0,(0,typeorm_2.InjectRepository)(student_entity_1.Student)),tslib_1.__param(1,(0,typeorm_2.InjectDataSource)()),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==typeorm_1.Repository&&typeorm_1.Repository)?_a:Object,"function"==typeof(_b=void 0!==typeorm_1.DataSource&&typeorm_1.DataSource)?_b:Object])],ReportsService),exports.ReportsService=ReportsService},844:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClassesController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),classes_entity_1=__webpack_require__(404),classes_service_1=__webpack_require__(453);let ClassesController=class ClassesController{constructor(classesService){this.classesService=classesService}get(filterDTO){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.keys(filterDTO).length?yield this.classesService.getFiltered(filterDTO):yield this.classesService.findAll()}))}find(id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const classes=yield this.classesService.findOne(id);if(!classes)throw new common_1.NotFoundException("Product does not exist!");return classes}))}add(classes){return this.classesService.create(classes)}update(dto,id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){if(0===(yield this.classesService.update(id,dto)).affected)throw new common_1.NotFoundException("classes not found");return 204}))}remove(id){this.classesService.remove(id)}};tslib_1.__decorate([(0,common_1.Get)("/"),tslib_1.__param(0,(0,common_1.Query)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String]),tslib_1.__metadata("design:returntype",Promise)],ClassesController.prototype,"get",null),tslib_1.__decorate([(0,common_1.Get)("/:id"),tslib_1.__param(0,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Number]),tslib_1.__metadata("design:returntype",Promise)],ClassesController.prototype,"find",null),tslib_1.__decorate([(0,common_1.Post)(),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==classes_entity_1.Classes&&classes_entity_1.Classes)?_a:Object]),tslib_1.__metadata("design:returntype",void 0)],ClassesController.prototype,"add",null),tslib_1.__decorate([(0,common_1.Patch)(":id"),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__param(1,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_b=void 0!==classes_entity_1.Classes&&classes_entity_1.Classes)?_b:Object,Number]),tslib_1.__metadata("design:returntype","function"==typeof(_c="undefined"!=typeof Promise&&Promise)?_c:Object)],ClassesController.prototype,"update",null),tslib_1.__decorate([(0,common_1.Delete)(":id"),tslib_1.__param(0,(0,common_1.Param)("id",common_1.ParseIntPipe)),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",void 0)],ClassesController.prototype,"remove",null),ClassesController=tslib_1.__decorate([(0,common_1.Controller)("classes"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_d=void 0!==classes_service_1.ClassesService&&classes_service_1.ClassesService)?_d:Object])],ClassesController),exports.ClassesController=ClassesController},453:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClassesService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),typeorm_1=__webpack_require__(399),typeorm_2=__webpack_require__(250),classes_entity_1=__webpack_require__(404);let ClassesService=class ClassesService{constructor(classesRepository){this.classesRepository=classesRepository}getFiltered(ceriteria){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let queryResult=yield this.findAll();return ceriteria&&(queryResult=queryResult.filter((entity=>entity.name===ceriteria))),queryResult}))}findAll(){return this.classesRepository.find()}findOne(id){return this.classesRepository.findOneBy({id})}create(country){return this.classesRepository.save(country)}remove(id){return this.classesRepository.delete(id)}update(id,classes){return this.classesRepository.update(id,classes)}};ClassesService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__param(0,(0,typeorm_1.InjectRepository)(classes_entity_1.Classes)),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==typeorm_2.Repository&&typeorm_2.Repository)?_a:Object])],ClassesService),exports.ClassesService=ClassesService},228:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CountriesController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),countries_entity_1=__webpack_require__(722),countries_service_1=__webpack_require__(157);let CountriesController=class CountriesController{constructor(countriesService){this.countriesService=countriesService}get(filterDTO){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.keys(filterDTO).length?yield this.countriesService.getFiltered(filterDTO):yield this.countriesService.findAll()}))}find(id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const countries=yield this.countriesService.findOne(id);if(!countries)throw new common_1.NotFoundException("Product does not exist!");return countries}))}add(countries){return this.countriesService.create(countries)}update(dto,id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){if(0===(yield this.countriesService.update(id,dto)).affected)throw new common_1.NotFoundException("countries not found");return 204}))}remove(id){this.countriesService.remove(id)}};tslib_1.__decorate([(0,common_1.Get)("/"),tslib_1.__param(0,(0,common_1.Query)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String]),tslib_1.__metadata("design:returntype",Promise)],CountriesController.prototype,"get",null),tslib_1.__decorate([(0,common_1.Get)("/:id"),tslib_1.__param(0,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Number]),tslib_1.__metadata("design:returntype",Promise)],CountriesController.prototype,"find",null),tslib_1.__decorate([(0,common_1.Post)(),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==countries_entity_1.Countries&&countries_entity_1.Countries)?_a:Object]),tslib_1.__metadata("design:returntype",void 0)],CountriesController.prototype,"add",null),tslib_1.__decorate([(0,common_1.Patch)(":id"),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__param(1,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_b=void 0!==countries_entity_1.Countries&&countries_entity_1.Countries)?_b:Object,Number]),tslib_1.__metadata("design:returntype","function"==typeof(_c="undefined"!=typeof Promise&&Promise)?_c:Object)],CountriesController.prototype,"update",null),tslib_1.__decorate([(0,common_1.Delete)(":id"),tslib_1.__param(0,(0,common_1.Param)("id",common_1.ParseIntPipe)),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",void 0)],CountriesController.prototype,"remove",null),CountriesController=tslib_1.__decorate([(0,common_1.Controller)("countries"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_d=void 0!==countries_service_1.CountriesService&&countries_service_1.CountriesService)?_d:Object])],CountriesController),exports.CountriesController=CountriesController},157:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CountriesService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),typeorm_1=__webpack_require__(399),typeorm_2=__webpack_require__(250),countries_entity_1=__webpack_require__(722);let CountriesService=class CountriesService{constructor(countriesRepository){this.countriesRepository=countriesRepository}getFiltered(ceriteria){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let queryResult=yield this.findAll();return ceriteria&&(queryResult=queryResult.filter((entity=>entity.name===ceriteria))),queryResult}))}findAll(){return this.countriesRepository.find()}findOne(id){return this.countriesRepository.findOneBy({id})}create(country){return this.countriesRepository.save(country)}remove(id){return this.countriesRepository.delete(id)}update(id,countries){return this.countriesRepository.update(id,countries)}};CountriesService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__param(0,(0,typeorm_1.InjectRepository)(countries_entity_1.Countries)),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==typeorm_2.Repository&&typeorm_2.Repository)?_a:Object])],CountriesService),exports.CountriesService=CountriesService},404:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Classes=void 0;const tslib_1=__webpack_require__(752),typeorm_1=__webpack_require__(250),student_entity_1=__webpack_require__(716);let Classes=class Classes{};tslib_1.__decorate([(0,typeorm_1.PrimaryGeneratedColumn)(),tslib_1.__metadata("design:type",Number)],Classes.prototype,"id",void 0),tslib_1.__decorate([(0,typeorm_1.Column)(),(0,typeorm_1.Column)({name:"class_name",length:255}),tslib_1.__metadata("design:type",String)],Classes.prototype,"name",void 0),tslib_1.__decorate([(0,typeorm_1.OneToMany)((()=>student_entity_1.Student),(student=>student.classes),{cascade:!0}),tslib_1.__metadata("design:type",Array)],Classes.prototype,"students",void 0),tslib_1.__decorate([(0,typeorm_1.CreateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_a="undefined"!=typeof Date&&Date)?_a:Object)],Classes.prototype,"CreatedDate",void 0),tslib_1.__decorate([(0,typeorm_1.UpdateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_b="undefined"!=typeof Date&&Date)?_b:Object)],Classes.prototype,"ModifiedDate",void 0),Classes=tslib_1.__decorate([(0,typeorm_1.Entity)("classes")],Classes),exports.Classes=Classes},722:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Countries=void 0;const tslib_1=__webpack_require__(752),typeorm_1=__webpack_require__(250),student_entity_1=__webpack_require__(716);let Countries=class Countries{};tslib_1.__decorate([(0,typeorm_1.PrimaryGeneratedColumn)({name:"id"}),tslib_1.__metadata("design:type",Number)],Countries.prototype,"id",void 0),tslib_1.__decorate([(0,typeorm_1.Column)({name:"name",length:255}),tslib_1.__metadata("design:type",String)],Countries.prototype,"name",void 0),tslib_1.__decorate([(0,typeorm_1.OneToMany)((()=>student_entity_1.Student),(student=>student.countries)),(0,typeorm_1.JoinColumn)({name:"studentid"}),tslib_1.__metadata("design:type",Array)],Countries.prototype,"students",void 0),tslib_1.__decorate([(0,typeorm_1.CreateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_a="undefined"!=typeof Date&&Date)?_a:Object)],Countries.prototype,"CreatedDate",void 0),tslib_1.__decorate([(0,typeorm_1.UpdateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_b="undefined"!=typeof Date&&Date)?_b:Object)],Countries.prototype,"ModifiedDate",void 0),Countries=tslib_1.__decorate([(0,typeorm_1.Entity)("countries")],Countries),exports.Countries=Countries},716:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d,_e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Student=void 0;const tslib_1=__webpack_require__(752),typeorm_1=__webpack_require__(250),classes_entity_1=__webpack_require__(404),countries_entity_1=__webpack_require__(722);let Student=class Student{};tslib_1.__decorate([(0,typeorm_1.PrimaryGeneratedColumn)({name:"id"}),tslib_1.__metadata("design:type",Number)],Student.prototype,"id",void 0),tslib_1.__decorate([(0,typeorm_1.Column)({length:255}),tslib_1.__metadata("design:type",String)],Student.prototype,"name",void 0),tslib_1.__decorate([(0,typeorm_1.Column)({type:"date",name:"date_of_birth"}),tslib_1.__metadata("design:type","function"==typeof(_a="undefined"!=typeof Date&&Date)?_a:Object)],Student.prototype,"dateOfBirth",void 0),tslib_1.__decorate([(0,typeorm_1.Column)({name:"classesId"}),(0,typeorm_1.ManyToOne)((()=>classes_entity_1.Classes),(classes=>classes.students),{onDelete:"CASCADE"}),(0,typeorm_1.JoinColumn)({name:"classesId",referencedColumnName:"id"}),tslib_1.__metadata("design:type","function"==typeof(_b=void 0!==classes_entity_1.Classes&&classes_entity_1.Classes)?_b:Object)],Student.prototype,"classes",void 0),tslib_1.__decorate([(0,typeorm_1.Column)({name:"countriesId"}),(0,typeorm_1.ManyToOne)((()=>countries_entity_1.Countries),(countries=>countries.students)),(0,typeorm_1.JoinColumn)({name:"countriesId",referencedColumnName:"id"}),tslib_1.__metadata("design:type","function"==typeof(_c=void 0!==countries_entity_1.Countries&&countries_entity_1.Countries)?_c:Object)],Student.prototype,"countries",void 0),tslib_1.__decorate([(0,typeorm_1.CreateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_d="undefined"!=typeof Date&&Date)?_d:Object)],Student.prototype,"CreatedDate",void 0),tslib_1.__decorate([(0,typeorm_1.UpdateDateColumn)({type:"timestamp"}),tslib_1.__metadata("design:type","function"==typeof(_e="undefined"!=typeof Date&&Date)?_e:Object)],Student.prototype,"ModifiedDate",void 0),Student=tslib_1.__decorate([(0,typeorm_1.Entity)("student")],Student),exports.Student=Student},899:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.StudentClass=void 0;const tslib_1=__webpack_require__(752),typeorm_1=__webpack_require__(250);let StudentClass=class StudentClass{};tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",Number)],StudentClass.prototype,"id",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",String)],StudentClass.prototype,"name",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type","function"==typeof(_a="undefined"!=typeof Date&&Date)?_a:Object)],StudentClass.prototype,"dateOfBirth",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",Number)],StudentClass.prototype,"countriesId",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",String)],StudentClass.prototype,"countryName",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",Number)],StudentClass.prototype,"classesId",void 0),tslib_1.__decorate([(0,typeorm_1.ViewColumn)(),tslib_1.__metadata("design:type",String)],StudentClass.prototype,"classesName",void 0),StudentClass=tslib_1.__decorate([(0,typeorm_1.ViewEntity)({expression:'\n select "t2"."id" "id" ,"t2"."name", "t2"."date_of_birth" "dateOfBirth", "t2"."countriesId", "t3"."name" "countryName" ,"t2"."classesId","t4"."class_name" "classesName"\n from "student" "t2"\n inner join "countries" "t3" on "t2"."countriesId"="t3"."id"\n inner join "classes" "t4" on "t2"."classesId"="t4"."id";\n '})],StudentClass),exports.StudentClass=StudentClass},375:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c,_d,_e,_f;Object.defineProperty(exports,"__esModule",{value:!0}),exports.StudentController=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),student_entity_1=__webpack_require__(716),student_service_1=__webpack_require__(181);let StudentController=class StudentController{constructor(studentService){this.studentService=studentService}getStudents(sort,order,page,query){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.studentService.getFilteredStudent(sort,order,page,query)}))}find(id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const student=yield this.studentService.findOne(id);if(!student)throw new common_1.NotFoundException("student does not exist!");return student}))}create(student){return this.studentService.create(student)}update(studentDto,id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){if(0===(yield this.studentService.update(id,studentDto)).affected)throw new common_1.NotFoundException("student not found");return 204}))}remove(id){this.studentService.remove(id)}};tslib_1.__decorate([(0,common_1.Post)("/search"),tslib_1.__param(0,(0,common_1.Query)("sort")),tslib_1.__param(1,(0,common_1.Query)("order")),tslib_1.__param(2,(0,common_1.Query)("page")),tslib_1.__param(3,(0,common_1.Query)("query")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[String,String,Number,String]),tslib_1.__metadata("design:returntype","function"==typeof(_a="undefined"!=typeof Promise&&Promise)?_a:Object)],StudentController.prototype,"getStudents",null),tslib_1.__decorate([(0,common_1.Get)("/:id"),tslib_1.__param(0,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Number]),tslib_1.__metadata("design:returntype","function"==typeof(_b="undefined"!=typeof Promise&&Promise)?_b:Object)],StudentController.prototype,"find",null),tslib_1.__decorate([(0,common_1.Post)(),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_c=void 0!==student_entity_1.Student&&student_entity_1.Student)?_c:Object]),tslib_1.__metadata("design:returntype",void 0)],StudentController.prototype,"create",null),tslib_1.__decorate([(0,common_1.Put)("/:id"),tslib_1.__param(0,(0,common_1.Body)()),tslib_1.__param(1,(0,common_1.Param)("id")),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",["function"==typeof(_d=void 0!==student_entity_1.Student&&student_entity_1.Student)?_d:Object,String]),tslib_1.__metadata("design:returntype","function"==typeof(_e="undefined"!=typeof Promise&&Promise)?_e:Object)],StudentController.prototype,"update",null),tslib_1.__decorate([(0,common_1.Delete)(":id"),tslib_1.__param(0,(0,common_1.Param)("id",common_1.ParseIntPipe)),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[Object]),tslib_1.__metadata("design:returntype",void 0)],StudentController.prototype,"remove",null),StudentController=tslib_1.__decorate([(0,common_1.Controller)("student"),tslib_1.__metadata("design:paramtypes",["function"==typeof(_f=void 0!==student_service_1.StudentService&&student_service_1.StudentService)?_f:Object])],StudentController),exports.StudentController=StudentController},387:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.StudentModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),student_entity_1=__webpack_require__(716),classes_entity_1=__webpack_require__(404),countries_entity_1=__webpack_require__(722),studentClass_viewentity_1=__webpack_require__(899),student_controller_1=__webpack_require__(375),student_service_1=__webpack_require__(181),typeorm_1=__webpack_require__(399),countries_service_1=__webpack_require__(157),countries_controller_1=__webpack_require__(228),classes_controller_1=__webpack_require__(844),classes_service_1=__webpack_require__(453),seeding_service_1=__webpack_require__(981);let StudentModule=class StudentModule{constructor(seedingService){this.seedingService=seedingService}onApplicationBootstrap(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){}))}seedingDatabase(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield this.seedingService.dropTables();for(let i=0;i<10;i++)yield this.seedingService.seedBaseTables();for(let i=0;i<110;i++)yield this.seedingService.seedStudent();yield this.seedingService.seedStudentUpdate()}))}};StudentModule=tslib_1.__decorate([(0,common_1.Module)({imports:[typeorm_1.TypeOrmModule.forFeature([student_entity_1.Student,classes_entity_1.Classes,countries_entity_1.Countries,studentClass_viewentity_1.StudentClass])],controllers:[student_controller_1.StudentController,countries_controller_1.CountriesController,classes_controller_1.ClassesController],providers:[student_service_1.StudentService,countries_service_1.CountriesService,classes_service_1.ClassesService,seeding_service_1.SeedingService]}),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==seeding_service_1.SeedingService&&seeding_service_1.SeedingService)?_a:Object])],StudentModule),exports.StudentModule=StudentModule},181:(__unused_webpack_module,exports,__webpack_require__)=>{var _a,_b,_c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.StudentService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),student_entity_1=__webpack_require__(716),typeorm_1=__webpack_require__(399),typeorm_2=__webpack_require__(250),studentClass_viewentity_1=__webpack_require__(899);let StudentService=class StudentService{constructor(studentsRepository,studentClassRepository,datasource){this.studentsRepository=studentsRepository,this.studentClassRepository=studentClassRepository,this.datasource=datasource}getFilteredStudent(sort,order,page,query){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const[data,total]=yield yield this.datasource.manager.findAndCount(studentClass_viewentity_1.StudentClass,{where:[{name:(0,typeorm_2.ILike)(`%${query}%`)}],order:{[sort]:order},take:10,skip:10*(page-1)});return{studentClasses:data,count:total}}))}findOne(id){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.studentClassRepository.findOneBy({id})}))}create(Student){return this.studentsRepository.save(Student)}update(id,studentDto){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return yield this.studentsRepository.update(id,studentDto)}))}remove(id){return this.studentsRepository.delete(id)}};StudentService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__param(0,(0,typeorm_1.InjectRepository)(student_entity_1.Student)),tslib_1.__param(1,(0,typeorm_1.InjectRepository)(studentClass_viewentity_1.StudentClass)),tslib_1.__param(2,(0,typeorm_1.InjectDataSource)()),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==typeorm_2.Repository&&typeorm_2.Repository)?_a:Object,"function"==typeof(_b=void 0!==typeorm_2.Repository&&typeorm_2.Repository)?_b:Object,"function"==typeof(_c=void 0!==typeorm_2.DataSource&&typeorm_2.DataSource)?_c:Object])],StudentService),exports.StudentService=StudentService},159:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752);tslib_1.__exportStar(__webpack_require__(410),exports),tslib_1.__exportStar(__webpack_require__(649),exports)},649:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RihalLoggerService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481);let RihalLoggerService=class RihalLoggerService extends common_1.ConsoleLogger{log(message,...optionalParams){}customLog(){this.log("Please feed the cat!")}error(message,stack,context){}warn(message,...optionalParams){}};RihalLoggerService=tslib_1.__decorate([(0,common_1.Injectable)({scope:common_1.Scope.TRANSIENT})],RihalLoggerService),exports.RihalLoggerService=RihalLoggerService},410:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RihalLoggerModule=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),rihal_logger_service_1=__webpack_require__(649);let RihalLoggerModule=class RihalLoggerModule{};RihalLoggerModule=tslib_1.__decorate([(0,common_1.Module)({providers:[rihal_logger_service_1.RihalLoggerService],exports:[rihal_logger_service_1.RihalLoggerService]})],RihalLoggerModule),exports.RihalLoggerModule=RihalLoggerModule},18:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.InitialStudentSeed=exports.InitialClassesSeed=exports.InitialCountrySeed=void 0;const faker_1=__webpack_require__(935);exports.InitialCountrySeed=function(entity){return fakerCountry()},exports.InitialClassesSeed=function(entity){return fakerClasses()},exports.InitialStudentSeed=function(entity){return fakerStudent()};const fakerCountry=()=>({countryName:faker_1.faker.address.country()}),fakerClasses=()=>({className:faker_1.faker.helpers.arrayElement(["arts","science","front end developing","full stack developer","yuga","spanish","cooking","meditation","negotiation","life tricks"])}),fakerStudent=()=>({name:faker_1.faker.name.firstName()+" "+faker_1.faker.name.lastName(),dateOfBirth:faker_1.faker.date.between("1970-01-01","2019-01-05"),classesId:faker_1.faker.datatype.number({min:41,max:50}),classes:fakerClasses(),countries:fakerCountry()})},981:(__unused_webpack_module,exports,__webpack_require__)=>{var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeedingService=void 0;const tslib_1=__webpack_require__(752),common_1=__webpack_require__(481),typeorm_1=__webpack_require__(250),classes_entity_1=__webpack_require__(404),countries_entity_1=__webpack_require__(722),student_entity_1=__webpack_require__(716),initialSeed_1=__webpack_require__(18);let SeedingService=class SeedingService{constructor(entityManager){this.entityManager=entityManager}dropTables(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this.entityManager.query("\n          truncate TABLE student RESTART IDENTITY CASCADE;\n          truncate TABLE  classes  RESTART IDENTITY CASCADE;\n          truncate TABLE countries  RESTART IDENTITY CASCADE;\n        ",null)])}))}seedBaseTables(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this.entityManager.save(countries_entity_1.Countries,(0,initialSeed_1.InitialCountrySeed)("countries")),this.entityManager.save(classes_entity_1.Classes,(0,initialSeed_1.InitialClassesSeed)("classes"))])}))}seedStudent(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this.entityManager.save(student_entity_1.Student,(0,initialSeed_1.InitialStudentSeed)("student"))])}))}seedStudentUpdate(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield Promise.all([this.entityManager.query('\n      update student set\n      "classesId"=floor(random() * 9 + 1), "countriesId"=\n      floor(random() * 9 + 1)\n      WHERE id is not null;',null)])}))}};SeedingService=tslib_1.__decorate([(0,common_1.Injectable)(),tslib_1.__metadata("design:paramtypes",["function"==typeof(_a=void 0!==typeorm_1.EntityManager&&typeorm_1.EntityManager)?_a:Object])],SeedingService),exports.SeedingService=SeedingService},935:module=>{module.exports=require("@faker-js/faker")},481:module=>{module.exports=require("@nestjs/common")},793:module=>{module.exports=require("@nestjs/config")},143:module=>{module.exports=require("@nestjs/core")},385:module=>{module.exports=require("@nestjs/serve-static")},519:module=>{module.exports=require("@nestjs/swagger")},399:module=>{module.exports=require("@nestjs/typeorm")},752:module=>{module.exports=require("tslib")},250:module=>{module.exports=require("typeorm")},17:module=>{module.exports=require("path")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__(752),swagger_1=__webpack_require__(519),core_1=__webpack_require__(143),app_module_1=__webpack_require__(292),common_1=__webpack_require__(481);!function(){tslib_1.__awaiter(this,void 0,void 0,(function*(){const app=yield core_1.NestFactory.create(app_module_1.AppModule,{cors:!0});app.setGlobalPrefix("api");const config=(new swagger_1.DocumentBuilder).setTitle("learnify app APIs").setDescription("The rihals assessment API description").setVersion("1.0").addTag("Student/Reports").build(),document=swagger_1.SwaggerModule.createDocument(app,config);swagger_1.SwaggerModule.setup("api",app,document);const port=process.env.PORT||3333;yield app.listen(port),app.useGlobalPipes(new common_1.ValidationPipe({whitelist:!0})),common_1.Logger.log(`🚀 Application is running on: http://localhost:${port}/api`)}))}()})();var __webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=main.js.map